{
  "evalId": "eval-bZF-2026-01-04T16:04:27",
  "results": {
    "version": 3,
    "timestamp": "2026-01-04T16:04:27.882Z",
    "prompts": [
      {
        "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}",
        "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}",
        "id": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "provider": "claude-3-haiku",
        "metrics": {
          "score": 12,
          "testPassCount": 12,
          "testFailCount": 2,
          "testErrorCount": 0,
          "assertPassCount": 12,
          "assertFailCount": 2,
          "totalLatencyMs": 20125,
          "tokenUsage": {
            "prompt": 37448,
            "completion": 1405,
            "cached": 0,
            "total": 38853,
            "numRequests": 14,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 0,
              "prompt": 0,
              "completion": 0,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0
        }
      },
      {
        "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}",
        "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}",
        "id": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "provider": "gemini-2.0-flash",
        "metrics": {
          "score": 14,
          "testPassCount": 14,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 14,
          "assertFailCount": 0,
          "totalLatencyMs": 11538,
          "tokenUsage": {
            "prompt": 38762,
            "completion": 713,
            "cached": 0,
            "total": 39475,
            "numRequests": 14,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 0,
              "prompt": 0,
              "completion": 0,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0
        }
      },
      {
        "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}",
        "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}",
        "id": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "provider": "gemini-3-flash",
        "metrics": {
          "score": 14,
          "testPassCount": 14,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 14,
          "assertFailCount": 0,
          "totalLatencyMs": 14745,
          "tokenUsage": {
            "prompt": 38774,
            "completion": 701,
            "cached": 0,
            "total": 39475,
            "numRequests": 14,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 0,
              "prompt": 0,
              "completion": 0,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0
        }
      }
    ],
    "results": [
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-007'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "7a01b5df-ad3e-45cb-a293-1d6034dae7a0",
        "latencyMs": 1205,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: What did Ohio voters say about jobs?",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 1,
        "provider": {
          "id": "openrouter:google/gemini-2.0-flash-001",
          "label": "gemini-2.0-flash"
        },
        "response": {
          "output": "```json\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\", \"race-007-fg-003-youngstown-working-class\"]}\n```",
          "tokenUsage": {
            "total": 2840,
            "prompt": 2771,
            "completion": 69,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "What did Ohio voters say about jobs?"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-007'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "What did Ohio voters say about jobs?"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-007'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "8b37b701-7ab8-4b6e-9043-9aefd198f362",
        "latencyMs": 1282,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: What did Ohio voters say about jobs?",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 2,
        "provider": {
          "id": "openrouter:google/gemini-3-flash-preview",
          "label": "gemini-3-flash"
        },
        "response": {
          "output": "{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\", \"race-007-fg-003-youngstown-working-class\"]}",
          "tokenUsage": {
            "total": 2835,
            "prompt": 2771,
            "completion": 64,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "What did Ohio voters say about jobs?"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-007'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "What did Ohio voters say about jobs?"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-007'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "9a67c681-d6d9-4a6f-9ffa-a059b66be3fd",
        "latencyMs": 1333,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: What did Ohio voters say about jobs?",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 0,
        "provider": {
          "id": "openrouter:anthropic/claude-3-haiku",
          "label": "claude-3-haiku"
        },
        "response": {
          "output": "{\n  \"focus_group_ids\": [\n    \"race-007-fg-001-cleveland-suburbs\",\n    \"race-007-fg-002-columbus-educated\",\n    \"race-007-fg-003-youngstown-working-class\"\n  ]\n}",
          "tokenUsage": {
            "total": 2744,
            "prompt": 2677,
            "completion": 67,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "What did Ohio voters say about jobs?"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-007'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "What did Ohio voters say about jobs?"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-001') || id.includes('race-009'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "9d87c48c-9043-437b-827b-43362292dd9d",
        "latencyMs": 1485,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: How do Michigan voters feel about the economy?",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 0,
        "provider": {
          "id": "openrouter:anthropic/claude-3-haiku",
          "label": "claude-3-haiku"
        },
        "response": {
          "output": "{\n  \"focus_group_ids\": [\n    \"race-001-fg-001-detroit-suburbs\",\n    \"race-001-fg-002-grand-rapids\",\n    \"race-001-fg-003-swing-voters-statewide\",\n    \"race-001-fg-004-northern-rural\",\n    \"race-009-fg-001-detroit-suburbs\",\n    \"race-009-fg-002-flint-saginaw\",\n    \"race-009-fg-003-grand-rapids\"\n  ]\n}",
          "tokenUsage": {
            "total": 2809,
            "prompt": 2678,
            "completion": 131,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "How do Michigan voters feel about the economy?"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-001') || id.includes('race-009'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 1,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "How do Michigan voters feel about the economy?"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-001') || id.includes('race-009'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "7833e361-f67f-484d-8925-a6a0679d495a",
        "latencyMs": 1127,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: How do Michigan voters feel about the economy?",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 1,
        "provider": {
          "id": "openrouter:google/gemini-2.0-flash-001",
          "label": "gemini-2.0-flash"
        },
        "response": {
          "output": "```json\n{\"focus_group_ids\": [\"race-001-fg-001-detroit-suburbs\", \"race-001-fg-002-grand-rapids\", \"race-001-fg-003-swing-voters-statewide\", \"race-001-fg-004-northern-rural\", \"race-009-fg-001-detroit-suburbs\", \"race-009-fg-002-flint-saginaw\", \"race-009-fg-003-grand-rapids\"]}\n```",
          "tokenUsage": {
            "total": 2915,
            "prompt": 2772,
            "completion": 143,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "How do Michigan voters feel about the economy?"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-001') || id.includes('race-009'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 1,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "How do Michigan voters feel about the economy?"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-001') || id.includes('race-009'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "9b05bec2-ca82-467c-b7d1-a3e2865ad6ef",
        "latencyMs": 1383,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: How do Michigan voters feel about the economy?",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 2,
        "provider": {
          "id": "openrouter:google/gemini-3-flash-preview",
          "label": "gemini-3-flash"
        },
        "response": {
          "output": "{\"focus_group_ids\": [\"race-001-fg-001-detroit-suburbs\", \"race-001-fg-002-grand-rapids\", \"race-001-fg-003-swing-voters-statewide\", \"race-001-fg-004-northern-rural\", \"race-009-fg-001-detroit-suburbs\", \"race-009-fg-002-flint-saginaw\", \"race-009-fg-003-grand-rapids\"]}",
          "tokenUsage": {
            "total": 2911,
            "prompt": 2773,
            "completion": 138,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "How do Michigan voters feel about the economy?"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-001') || id.includes('race-009'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 1,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "How do Michigan voters feel about the economy?"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-002') || id.includes('race-010'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "36b5b8be-cce4-4b44-bc09-2eb07861d04b",
        "latencyMs": 1219,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: Pennsylvania voters on healthcare",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 1,
        "provider": {
          "id": "openrouter:google/gemini-2.0-flash-001",
          "label": "gemini-2.0-flash"
        },
        "response": {
          "output": "```json\n{\"focus_group_ids\": [\"race-002-fg-001-philadelphia-suburbs\", \"race-002-fg-002-pittsburgh-area\", \"race-002-fg-003-scranton-working-class\", \"race-010-fg-001-philadelphia-suburbs\", \"race-010-fg-002-pittsburgh\", \"race-010-fg-003-scranton-nepa\"]}\n```",
          "tokenUsage": {
            "total": 2892,
            "prompt": 2767,
            "completion": 125,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "Pennsylvania voters on healthcare"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-002') || id.includes('race-010'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 2,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "Pennsylvania voters on healthcare"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-002') || id.includes('race-010'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "84c51235-b52b-46cb-b4d5-4bbeb4ddfadf",
        "latencyMs": 1519,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: Pennsylvania voters on healthcare",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 0,
        "provider": {
          "id": "openrouter:anthropic/claude-3-haiku",
          "label": "claude-3-haiku"
        },
        "response": {
          "output": "{\n  \"focus_group_ids\": [\n    \"race-002-fg-001-philadelphia-suburbs\",\n    \"race-002-fg-002-pittsburgh-area\",\n    \"race-002-fg-003-scranton-working-class\",\n    \"race-010-fg-001-philadelphia-suburbs\", \n    \"race-010-fg-002-pittsburgh\",\n    \"race-010-fg-003-scranton-nepa\"\n  ]\n}",
          "tokenUsage": {
            "total": 2790,
            "prompt": 2673,
            "completion": 117,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "Pennsylvania voters on healthcare"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-002') || id.includes('race-010'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 2,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "Pennsylvania voters on healthcare"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-002') || id.includes('race-010'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "77a09ac0-9b0b-4cd9-b8e1-570d002aa476",
        "latencyMs": 1593,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: Pennsylvania voters on healthcare",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 2,
        "provider": {
          "id": "openrouter:google/gemini-3-flash-preview",
          "label": "gemini-3-flash"
        },
        "response": {
          "output": "{\"focus_group_ids\": [\"race-002-fg-001-philadelphia-suburbs\", \"race-002-fg-002-pittsburgh-area\", \"race-002-fg-003-scranton-working-class\", \"race-010-fg-001-philadelphia-suburbs\", \"race-010-fg-002-pittsburgh\", \"race-010-fg-003-scranton-nepa\"]}",
          "tokenUsage": {
            "total": 2887,
            "prompt": 2767,
            "completion": 120,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "Pennsylvania voters on healthcare"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-002') || id.includes('race-010'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 2,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "Pennsylvania voters on healthcare"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-003') || id.includes('race-012'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "9a054221-c835-4a7c-a38d-97983dff5183",
        "latencyMs": 906,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: What did Wisconsin voters think about education?",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 0,
        "provider": {
          "id": "openrouter:anthropic/claude-3-haiku",
          "label": "claude-3-haiku"
        },
        "response": {
          "output": "{\n  \"focus_group_ids\": [\n    \"race-012-fg-001-milwaukee-suburbs\",\n    \"race-012-fg-002-madison\",\n    \"race-012-fg-003-fox-valley\"\n  ]\n}",
          "tokenUsage": {
            "total": 2739,
            "prompt": 2677,
            "completion": 62,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "What did Wisconsin voters think about education?"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-003') || id.includes('race-012'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 3,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "What did Wisconsin voters think about education?"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-003') || id.includes('race-012'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "9296bad7-dbd1-4564-9b82-371aad1ab681",
        "latencyMs": 1217,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: What did Wisconsin voters think about education?",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 1,
        "provider": {
          "id": "openrouter:google/gemini-2.0-flash-001",
          "label": "gemini-2.0-flash"
        },
        "response": {
          "output": "```json\n{\"focus_group_ids\": [\"race-003-fg-001-milwaukee-suburbs\", \"race-003-fg-002-madison-area\", \"race-003-fg-003-fox-valley\", \"race-012-fg-001-milwaukee-suburbs\", \"race-012-fg-002-madison\", \"race-012-fg-003-fox-valley\"]}\n```",
          "tokenUsage": {
            "total": 2889,
            "prompt": 2771,
            "completion": 118,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "What did Wisconsin voters think about education?"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-003') || id.includes('race-012'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 3,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "What did Wisconsin voters think about education?"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-003') || id.includes('race-012'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "71d9e384-9464-48b3-9ab9-d7bf08ca72d6",
        "latencyMs": 1370,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: What did Wisconsin voters think about education?",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 2,
        "provider": {
          "id": "openrouter:google/gemini-3-flash-preview",
          "label": "gemini-3-flash"
        },
        "response": {
          "output": "{\"focus_group_ids\": [\"race-003-fg-001-milwaukee-suburbs\", \"race-003-fg-002-madison-area\", \"race-003-fg-003-fox-valley\", \"race-012-fg-001-milwaukee-suburbs\", \"race-012-fg-002-madison\", \"race-012-fg-003-fox-valley\"]}",
          "tokenUsage": {
            "total": 2885,
            "prompt": 2772,
            "completion": 113,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "What did Wisconsin voters think about education?"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-003') || id.includes('race-012'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 3,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "What did Wisconsin voters think about education?"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-004'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "b39bae6f-c717-4a72-8375-f94431cefee0",
        "latencyMs": 1065,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: Georgia voters on voting rights",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 0,
        "provider": {
          "id": "openrouter:anthropic/claude-3-haiku",
          "label": "claude-3-haiku"
        },
        "response": {
          "output": "{\n  \"focus_group_ids\": [\n    \"race-004-fg-001-atlanta-suburbs\",\n    \"race-004-fg-002-atlanta-black-voters\",\n    \"race-004-fg-003-rural-southwest\"\n  ]\n}",
          "tokenUsage": {
            "total": 2740,
            "prompt": 2674,
            "completion": 66,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "Georgia voters on voting rights"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-004'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 4,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "Georgia voters on voting rights"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-004'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "c99dffe2-cd11-4b5d-a1f8-f13a5ae2b4e7",
        "latencyMs": 973,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: Georgia voters on voting rights",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 2,
        "provider": {
          "id": "openrouter:google/gemini-3-flash-preview",
          "label": "gemini-3-flash"
        },
        "response": {
          "output": "{\"focus_group_ids\": [\"race-004-fg-001-atlanta-suburbs\", \"race-004-fg-002-atlanta-black-voters\", \"race-004-fg-003-rural-southwest\"]}",
          "tokenUsage": {
            "total": 2834,
            "prompt": 2769,
            "completion": 65,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "Georgia voters on voting rights"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-004'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 4,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "Georgia voters on voting rights"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-004'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "74029cb8-27ff-40d3-aa90-551ca1ec6942",
        "latencyMs": 1059,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: Georgia voters on voting rights",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 1,
        "provider": {
          "id": "openrouter:google/gemini-2.0-flash-001",
          "label": "gemini-2.0-flash"
        },
        "response": {
          "output": "```json\n{\"focus_group_ids\": [\"race-004-fg-001-atlanta-suburbs\", \"race-004-fg-002-atlanta-black-voters\", \"race-004-fg-003-rural-southwest\"]}\n```",
          "tokenUsage": {
            "total": 2838,
            "prompt": 2768,
            "completion": 70,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "Georgia voters on voting rights"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-004'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 4,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "Georgia voters on voting rights"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-005'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "d60c8454-cc16-49fb-b6be-07b9804149fb",
        "latencyMs": 771,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: Arizona immigration concerns",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 1,
        "provider": {
          "id": "openrouter:google/gemini-2.0-flash-001",
          "label": "gemini-2.0-flash"
        },
        "response": {
          "output": "```json\n{\"focus_group_ids\": [\"race-005-fg-002-latino-phoenix\"]}\n```",
          "tokenUsage": {
            "total": 2797,
            "prompt": 2766,
            "completion": 31,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "Arizona immigration concerns"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-005'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 5,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "Arizona immigration concerns"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-005'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "36aa2368-01b3-44f7-a992-8ec6b5cc9a10",
        "latencyMs": 1586,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: Arizona immigration concerns",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 0,
        "provider": {
          "id": "openrouter:anthropic/claude-3-haiku",
          "label": "claude-3-haiku"
        },
        "response": {
          "output": "{\n  \"focus_group_ids\": [\n    \"race-005-fg-001-maricopa-suburbs\",\n    \"race-005-fg-002-latino-phoenix\",\n    \"race-005-fg-003-tucson\"\n  ]\n}",
          "tokenUsage": {
            "total": 2737,
            "prompt": 2672,
            "completion": 65,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "Arizona immigration concerns"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-005'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 5,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "Arizona immigration concerns"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-005'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "f702402a-0ddf-48d0-bb9d-293b1bcf8588",
        "latencyMs": 1044,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: Arizona immigration concerns",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 2,
        "provider": {
          "id": "openrouter:google/gemini-3-flash-preview",
          "label": "gemini-3-flash"
        },
        "response": {
          "output": "{\"focus_group_ids\": [\"race-005-fg-001-maricopa-suburbs\", \"race-005-fg-002-latino-phoenix\", \"race-005-fg-003-tucson\"]}",
          "tokenUsage": {
            "total": 2830,
            "prompt": 2767,
            "completion": 63,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "Arizona immigration concerns"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-005'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 5,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "Arizona immigration concerns"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-011'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "829bc6b0-6ce2-4a44-b169-dbee3be6b6bd",
        "latencyMs": 828,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: North Carolina suburban voters",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 0,
        "provider": {
          "id": "openrouter:anthropic/claude-3-haiku",
          "label": "claude-3-haiku"
        },
        "response": {
          "output": "{\n  \"focus_group_ids\": [\n    \"race-011-fg-001-charlotte-suburbs\"\n  ]\n}",
          "tokenUsage": {
            "total": 2707,
            "prompt": 2673,
            "completion": 34,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "North Carolina suburban voters"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-011'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 6,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "North Carolina suburban voters"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-011'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "6db64e2b-782d-412b-bd4f-e067d47a9132",
        "latencyMs": 627,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: North Carolina suburban voters",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 1,
        "provider": {
          "id": "openrouter:google/gemini-2.0-flash-001",
          "label": "gemini-2.0-flash"
        },
        "response": {
          "output": "```json\n{\"focus_group_ids\": [\"race-011-fg-001-charlotte-suburbs\"]}\n```",
          "tokenUsage": {
            "total": 2799,
            "prompt": 2767,
            "completion": 32,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "North Carolina suburban voters"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-011'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 6,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "North Carolina suburban voters"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-011'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "1d769318-dbcb-455a-baec-d72e84367320",
        "latencyMs": 860,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: North Carolina suburban voters",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 2,
        "provider": {
          "id": "openrouter:google/gemini-3-flash-preview",
          "label": "gemini-3-flash"
        },
        "response": {
          "output": "{\"focus_group_ids\": [\"race-011-fg-001-charlotte-suburbs\"]}",
          "tokenUsage": {
            "total": 2795,
            "prompt": 2768,
            "completion": 27,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "North Carolina suburban voters"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-011'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 6,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "North Carolina suburban voters"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-008'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "84840e69-0d1a-4921-8451-70110ea13b13",
        "latencyMs": 586,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: Montana rural voters",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 1,
        "provider": {
          "id": "openrouter:google/gemini-2.0-flash-001",
          "label": "gemini-2.0-flash"
        },
        "response": {
          "output": "```json\n{\"focus_group_ids\": [\"race-008-fg-002-rural-ranching\"]}\n```",
          "tokenUsage": {
            "total": 2797,
            "prompt": 2766,
            "completion": 31,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "Montana rural voters"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-008'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 7,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "Montana rural voters"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-008'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "cf68ed07-2d05-401d-96f4-eb7530f46232",
        "latencyMs": 793,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: Montana rural voters",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 0,
        "provider": {
          "id": "openrouter:anthropic/claude-3-haiku",
          "label": "claude-3-haiku"
        },
        "response": {
          "output": "{\n  \"focus_group_ids\": [\n    \"race-008-fg-001-billings\",\n    \"race-008-fg-002-rural-ranching\"\n  ]\n}",
          "tokenUsage": {
            "total": 2721,
            "prompt": 2672,
            "completion": 49,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "Montana rural voters"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-008'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 7,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "Montana rural voters"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-008'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "f979ff0c-2902-4cd1-9744-e73b48771559",
        "latencyMs": 990,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: Montana rural voters",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 2,
        "provider": {
          "id": "openrouter:google/gemini-3-flash-preview",
          "label": "gemini-3-flash"
        },
        "response": {
          "output": "{\"focus_group_ids\": [\"race-008-fg-002-rural-ranching\"]}",
          "tokenUsage": {
            "total": 2793,
            "prompt": 2767,
            "completion": 26,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "Montana rural voters"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-008'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 7,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "Montana rural voters"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "61f814c7-81e1-4864-ad79-00866ae2dbf0",
        "latencyMs": 647,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: What do voters think about the economy?",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 0,
        "provider": {
          "id": "openrouter:anthropic/claude-3-haiku",
          "label": "claude-3-haiku"
        },
        "response": {
          "output": "{\"all\": true}",
          "tokenUsage": {
            "total": 2685,
            "prompt": 2677,
            "completion": 8,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "What do voters think about the economy?"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 8,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "What do voters think about the economy?"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "d47a318f-e849-4761-86ae-3594c61674b9",
        "latencyMs": 760,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: What do voters think about the economy?",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 1,
        "provider": {
          "id": "openrouter:google/gemini-2.0-flash-001",
          "label": "gemini-2.0-flash"
        },
        "response": {
          "output": "{\"all\": true}\n",
          "tokenUsage": {
            "total": 2777,
            "prompt": 2771,
            "completion": 6,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "What do voters think about the economy?"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 8,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "What do voters think about the economy?"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "4a81eba4-8ed6-449f-b166-1480d2593599",
        "latencyMs": 822,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: What do voters think about the economy?",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 2,
        "provider": {
          "id": "openrouter:google/gemini-3-flash-preview",
          "label": "gemini-3-flash"
        },
        "response": {
          "output": "{\"all\": true}",
          "tokenUsage": {
            "total": 2777,
            "prompt": 2772,
            "completion": 5,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "What do voters think about the economy?"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 8,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "What do voters think about the economy?"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "dd354d3d-1068-48be-a371-95f5671e7d3b",
        "latencyMs": 480,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: How do people feel about inflation?",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 1,
        "provider": {
          "id": "openrouter:google/gemini-2.0-flash-001",
          "label": "gemini-2.0-flash"
        },
        "response": {
          "output": "{\"all\": true}\n",
          "tokenUsage": {
            "total": 2776,
            "prompt": 2770,
            "completion": 6,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "How do people feel about inflation?"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 9,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "How do people feel about inflation?"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "6885b537-d533-4b74-8590-7f18b5d3324c",
        "latencyMs": 730,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: How do people feel about inflation?",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 2,
        "provider": {
          "id": "openrouter:google/gemini-3-flash-preview",
          "label": "gemini-3-flash"
        },
        "response": {
          "output": "{\"all\": true}",
          "tokenUsage": {
            "total": 2776,
            "prompt": 2771,
            "completion": 5,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "How do people feel about inflation?"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 9,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "How do people feel about inflation?"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "d8ae2470-bcb5-4ec5-9277-c970ee61a061",
        "latencyMs": 1279,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: How do people feel about inflation?",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 0,
        "provider": {
          "id": "openrouter:anthropic/claude-3-haiku",
          "label": "claude-3-haiku"
        },
        "response": {
          "output": "{\"all\": true}",
          "tokenUsage": {
            "total": 2684,
            "prompt": 2676,
            "completion": 8,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "How do people feel about inflation?"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 9,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "How do people feel about inflation?"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "error": "Custom function returned false\nlet text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }",
        "gradingResult": {
          "pass": false,
          "score": 0,
          "reason": "Custom function returned false\nlet text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": false,
              "score": 0,
              "reason": "Custom function returned false\nlet text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "43d51dde-dd6a-44b0-8c6f-c11266812180",
        "latencyMs": 3255,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: Voter concerns about healthcare costs",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 0,
        "provider": {
          "id": "openrouter:anthropic/claude-3-haiku",
          "label": "claude-3-haiku"
        },
        "response": {
          "output": "{\"focus_group_ids\": [\"race-002-fg-001-philadelphia-suburbs\", \"race-002-fg-002-pittsburgh-area\", \"race-002-fg-003-scranton-working-class\", \"race-003-fg-001-milwaukee-suburbs\", \"race-003-fg-002-madison-area\", \"race-003-fg-003-fox-valley\", \"race-004-fg-001-atlanta-suburbs\", \"race-004-fg-002-atlanta-black-voters\", \"race-004-fg-003-rural-southwest\", \"race-005-fg-001-maricopa-suburbs\", \"race-005-fg-002-latino-phoenix\", \"race-005-fg-003-tucson\", \"race-006-fg-001-las-vegas-union\", \"race-006-fg-002-reno-transplants\", \"race-006-fg-003-latino-vegas\", \"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\", \"race-007-fg-003-youngstown-working-class\", \"race-008-fg-001-billings\", \"race-008-fg-002-rural-ranching\", \"race-008-fg-003-native-reservations\", \"race-009-fg-001-detroit-suburbs\", \"race-009-fg-002-flint-saginaw\", \"race-009-fg-003-grand-rapids\", \"race-010-fg-001-philadelphia-suburbs\", \"race-010-fg-002-pittsburgh\", \"race-010-fg-003-scranton-nepa\", \"race-011-fg-001-charlotte-suburbs\", \"race-011-fg-002-research-triangle\", \"race-011-fg-003-rural-eastern\", \"race-012-fg-001-milwaukee-suburbs\", \"race-012-fg-002-madison\", \"race-012-fg-003-fox-valley\"]}",
          "tokenUsage": {
            "total": 3134,
            "prompt": 2675,
            "completion": 459,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 0,
        "success": false,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "Voter concerns about healthcare costs"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 10,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "Voter concerns about healthcare costs"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "e605649a-ee44-4e43-a4a9-7aac335d287f",
        "latencyMs": 652,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: Voter concerns about healthcare costs",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 1,
        "provider": {
          "id": "openrouter:google/gemini-2.0-flash-001",
          "label": "gemini-2.0-flash"
        },
        "response": {
          "output": "{\"all\": true}\n",
          "tokenUsage": {
            "total": 2774,
            "prompt": 2768,
            "completion": 6,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "Voter concerns about healthcare costs"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 10,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "Voter concerns about healthcare costs"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "92482093-27a7-4d47-8c1e-0c64e89737ce",
        "latencyMs": 869,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: Voter concerns about healthcare costs",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 2,
        "provider": {
          "id": "openrouter:google/gemini-3-flash-preview",
          "label": "gemini-3-flash"
        },
        "response": {
          "output": "{\"all\": true}",
          "tokenUsage": {
            "total": 2774,
            "prompt": 2769,
            "completion": 5,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "Voter concerns about healthcare costs"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 10,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "Voter concerns about healthcare costs"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "error": "Custom function returned false\nlet text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }",
        "gradingResult": {
          "pass": false,
          "score": 0,
          "reason": "Custom function returned false\nlet text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": false,
              "score": 0,
              "reason": "Custom function returned false\nlet text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "eae5ead3-ad79-467c-b441-44fab4c76875",
        "latencyMs": 2152,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: What messaging resonates with swing voters?",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 0,
        "provider": {
          "id": "openrouter:anthropic/claude-3-haiku",
          "label": "claude-3-haiku"
        },
        "response": {
          "output": "{\n  \"focus_group_ids\": [\n    \"race-001-fg-001-detroit-suburbs\",\n    \"race-001-fg-002-grand-rapids\", \n    \"race-001-fg-003-swing-voters-statewide\",\n    \"race-002-fg-001-philadelphia-suburbs\",\n    \"race-002-fg-003-scranton-working-class\",\n    \"race-003-fg-001-milwaukee-suburbs\",\n    \"race-003-fg-003-fox-valley\",\n    \"race-004-fg-001-atlanta-suburbs\",\n    \"race-005-fg-001-maricopa-suburbs\",\n    \"race-006-fg-002-reno-transplants\",\n    \"race-009-fg-001-detroit-suburbs\",\n    \"race-009-fg-003-grand-rapids\",\n    \"race-010-fg-001-philadelphia-suburbs\",\n    \"race-011-fg-001-charlotte-suburbs\",\n    \"race-012-fg-001-milwaukee-suburbs\",\n    \"race-012-fg-003-fox-valley\"\n  ]\n}",
          "tokenUsage": {
            "total": 2948,
            "prompt": 2677,
            "completion": 271,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 0,
        "success": false,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "What messaging resonates with swing voters?"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 11,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "What messaging resonates with swing voters?"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "7a8547e3-92e2-41af-8a1a-5074f885d20a",
        "latencyMs": 578,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: What messaging resonates with swing voters?",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 1,
        "provider": {
          "id": "openrouter:google/gemini-2.0-flash-001",
          "label": "gemini-2.0-flash"
        },
        "response": {
          "output": "{\"all\": true}\n",
          "tokenUsage": {
            "total": 2776,
            "prompt": 2770,
            "completion": 6,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "What messaging resonates with swing voters?"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 11,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "What messaging resonates with swing voters?"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "70007d3d-138f-4c50-8a02-012952dec423",
        "latencyMs": 880,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: What messaging resonates with swing voters?",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 2,
        "provider": {
          "id": "openrouter:google/gemini-3-flash-preview",
          "label": "gemini-3-flash"
        },
        "response": {
          "output": "{\"all\": true}",
          "tokenUsage": {
            "total": 2776,
            "prompt": 2771,
            "completion": 5,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "What messaging resonates with swing voters?"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 11,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "What messaging resonates with swing voters?"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length === 0 || result.reason;\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "0d85bfd5-7769-4152-a4f8-2a15573c99cf",
        "latencyMs": 766,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: California voters on housing",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 1,
        "provider": {
          "id": "openrouter:google/gemini-2.0-flash-001",
          "label": "gemini-2.0-flash"
        },
        "response": {
          "output": "{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}",
          "tokenUsage": {
            "total": 2806,
            "prompt": 2767,
            "completion": 39,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "California voters on housing"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length === 0 || result.reason;\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 12,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "California voters on housing"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length === 0 || result.reason;\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "8bcbdb23-ace8-49ab-9beb-25917205f109",
        "latencyMs": 2175,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: California voters on housing",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 0,
        "provider": {
          "id": "openrouter:anthropic/claude-3-haiku",
          "label": "claude-3-haiku"
        },
        "response": {
          "output": "{\"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}",
          "tokenUsage": {
            "total": 2707,
            "prompt": 2673,
            "completion": 34,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "California voters on housing"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length === 0 || result.reason;\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 12,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "California voters on housing"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length === 0 || result.reason;\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "5b0286cc-ba05-41eb-bae6-ea53632dbaaf",
        "latencyMs": 1016,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: California voters on housing",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 2,
        "provider": {
          "id": "openrouter:google/gemini-3-flash-preview",
          "label": "gemini-3-flash"
        },
        "response": {
          "output": "{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}",
          "tokenUsage": {
            "total": 2807,
            "prompt": 2768,
            "completion": 39,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "California voters on housing"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length === 0 || result.reason;\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 12,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "California voters on housing"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.some(id => id.includes('cleveland') || id.includes('race-007-fg-001'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "7f42f033-af3d-4290-a30f-18557a05c37b",
        "latencyMs": 491,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: Cleveland suburbs on local issues",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 1,
        "provider": {
          "id": "openrouter:google/gemini-2.0-flash-001",
          "label": "gemini-2.0-flash"
        },
        "response": {
          "output": "```json\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\"]}\n```",
          "tokenUsage": {
            "total": 2799,
            "prompt": 2768,
            "completion": 31,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "Cleveland suburbs on local issues"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.some(id => id.includes('cleveland') || id.includes('race-007-fg-001'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 13,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "Cleveland suburbs on local issues"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.some(id => id.includes('cleveland') || id.includes('race-007-fg-001'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "97a111e7-cc30-4c55-a1ca-6761c237d182",
        "latencyMs": 1102,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: Cleveland suburbs on local issues",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 0,
        "provider": {
          "id": "openrouter:anthropic/claude-3-haiku",
          "label": "claude-3-haiku"
        },
        "response": {
          "output": "{\n  \"focus_group_ids\": [\n    \"race-007-fg-001-cleveland-suburbs\"\n  ]\n}",
          "tokenUsage": {
            "total": 2708,
            "prompt": 2674,
            "completion": 34,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "Cleveland suburbs on local issues"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.some(id => id.includes('cleveland') || id.includes('race-007-fg-001'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 13,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "Cleveland suburbs on local issues"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.some(id => id.includes('cleveland') || id.includes('race-007-fg-001'));\n} catch { return false; }\n"
              }
            }
          ]
        },
        "id": "5e822952-0b9d-4ce3-9b5e-f0dc63d34f1b",
        "latencyMs": 933,
        "namedScores": {},
        "prompt": {
          "raw": "You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n- race-001-fg-001-detroit-suburbs: Michigan Governor 2022 | Detroit Suburbs (Oakland County - Troy) | 10 (6F, 4M) - Swing voters who voted Trump 2016, Biden 2020 | outcome=win\n- race-001-fg-002-grand-rapids: Michigan Governor 2022 | Grand Rapids Metro (Kent County) | 10 (5F, 5M) - Mixed partisans, economic-focused voters | outcome=win\n- race-001-fg-003-swing-voters-statewide: Michigan Governor 2022 | Virtual (Statewide Michigan) | 10 (5F, 5M) - Persuadable voters from diverse geographic regions | outcome=win\n- race-001-fg-004-northern-rural: Michigan Governor 2022 | Northern Michigan Rural (Alpena County - Alpena) | 8 (3F, 5M) - Rural voters, mostly Republican-lean, some persuadable | outcome=win\n- race-002-fg-001-philadelphia-suburbs: Pennsylvania Senate 2022 | Philadelphia Suburbs (Montgomery County - King of Prussia) | 10 (7F, 3M) - College-educated suburban voters, mixed partisans | outcome=win\n- race-002-fg-002-pittsburgh-area: Pennsylvania Senate 2022 | Pittsburgh Area (Allegheny County - Monroeville) | 10 (4F, 6M) - Union households and working-class voters | outcome=win\n- race-002-fg-003-scranton-working-class: Pennsylvania Senate 2022 | Scranton/NEPA (Lackawanna County) | 10 (5F, 5M) - Working-class persuadable voters, mixed registration | outcome=win\n- race-003-fg-001-milwaukee-suburbs: Wisconsin Senate 2022 | Milwaukee Suburbs - WOW Counties (Waukesha County - Brookfield) | 10 (6F, 4M) - Lean-R suburban voters, persuadable on margins | outcome=loss\n- race-003-fg-002-madison-area: Wisconsin Senate 2022 | Madison Area (Dane County) | 10 (5F, 5M) - Democratic base voters, motivation check | outcome=loss\n- race-003-fg-003-fox-valley: Wisconsin Senate 2022 | Fox Valley (Outagamie County - Appleton) | 10 (5F, 5M) - Swing manufacturing region voters, mixed partisans | outcome=loss\n- race-004-fg-001-atlanta-suburbs: Georgia Senate 2022 | Atlanta Suburbs (Cobb County - Marietta) | 10 (6F, 4M) - Suburban swing voters, diverse demographics | outcome=win\n- race-004-fg-002-atlanta-black-voters: Georgia Senate 2022 | Atlanta (Fulton County - Southwest Atlanta) | 10 (6F, 4M) - Black voters, mix of ages and backgrounds | outcome=win\n- race-004-fg-003-rural-southwest: Georgia Senate 2022 | Rural Southwest Georgia (Dougherty County - Albany) | 9 (5F, 4M) - Rural voters, Black Belt region, economically stressed | outcome=win\n- race-005-fg-001-maricopa-suburbs: Arizona Governor 2022 | Maricopa County Suburbs (Scottsdale/Chandler) | 10 (5F, 5M) - Suburban swing voters, includes McCain Republicans | outcome=win\n- race-005-fg-002-latino-phoenix: Arizona Governor 2022 | Phoenix Metro (Maryvale/Glendale - Latino Community) | 10 (6F, 4M) - Latino voters, mix of citizens by birth and naturalized | outcome=win\n- race-005-fg-003-tucson: Arizona Governor 2022 | Tucson (Pima County) | 10 (6F, 4M) - Progressive base, environmentalists, academics, activists | outcome=win\n- race-006-fg-001-las-vegas-union: Nevada Senate 2022 | Las Vegas (Culinary Union Hall) | 10 (6F, 4M) - Culinary Union members, hospitality workers | outcome=win\n- race-006-fg-002-reno-transplants: Nevada Senate 2022 | Reno (Washoe County) | 10 (5F, 5M) - Mix of longtime Reno residents and California transplants | outcome=win\n- race-006-fg-003-latino-vegas: Nevada Senate 2022 | Las Vegas (East Las Vegas/Henderson - Latino Community) | 10 (5F, 5M) - Latino voters, mix of union and non-union, various backgrounds | outcome=win\n- race-007-fg-001-cleveland-suburbs: Ohio Senate 2024 | Cleveland Suburbs (Cuyahoga County - Parma/Strongsville) | 10 (5F, 5M) - Suburban swing voters, mix of Biden 2020 and Trump 2020 | outcome=loss\n- race-007-fg-002-columbus-educated: Ohio Senate 2024 | Columbus Metro (Franklin County - Upper Arlington/Dublin) | 10 (6F, 4M) - College-educated professionals, suburban, mostly Biden 2020 | outcome=loss\n- race-007-fg-003-youngstown-working-class: Ohio Senate 2024 | Youngstown/Mahoning Valley (Mahoning County) | 10 (4F, 6M) - Working-class voters, union and non-union, heavily Trump 2016/2020 | outcome=loss\n- race-008-fg-001-billings: Montana Senate 2024 | Billings (Yellowstone County) | 10 (5F, 5M) - Mix of Billings residents, urban Montana context | outcome=loss\n- race-008-fg-002-rural-ranching: Montana Senate 2024 | Rural Montana (Lewistown/Fergus County) | 8 (3F, 5M) - Ranchers, farmers, rural small-town residents | outcome=loss\n- race-008-fg-003-native-reservations: Montana Senate 2024 | Crow Reservation (Big Horn County) | 9 (5F, 4M) - Native American voters from Crow and Northern Cheyenne reservations | outcome=loss\n- race-009-fg-001-detroit-suburbs: Michigan Senate 2024 | Detroit Suburbs (Oakland County - Troy/Rochester) | 10 (6F, 4M) - Suburban voters, mix of Biden 2020 and Trump 2020 | outcome=win\n- race-009-fg-002-flint-saginaw: Michigan Senate 2024 | Flint/Saginaw (Genesee/Saginaw Counties) | 10 (5F, 5M) - Working-class voters, union and non-union | outcome=win\n- race-009-fg-003-grand-rapids: Michigan Senate 2024 | Grand Rapids (Kent County) | 10 (5F, 5M) - Mix of traditional conservatives and changing suburbs | outcome=win\n- race-010-fg-001-philadelphia-suburbs: Pennsylvania Senate 2024 | Philadelphia Suburbs (Chester County - West Chester/Malvern) | 10 (6F, 4M) - Suburban professionals, mostly college-educated | outcome=win\n- race-010-fg-002-pittsburgh: Pennsylvania Senate 2024 | Pittsburgh (Allegheny County) | 10 (5F, 5M) - Mix of urban Pittsburgh and surrounding communities | outcome=win\n- race-010-fg-003-scranton-nepa: Pennsylvania Senate 2024 | Scranton/NEPA (Lackawanna/Luzerne Counties) | 10 (5F, 5M) - Working-class voters, traditional Democrats under pressure | outcome=win\n- race-011-fg-001-charlotte-suburbs: North Carolina Governor 2024 | Charlotte Suburbs (Mecklenburg/Union Counties) | 10 (6F, 4M) - Suburban voters, mix of transplants and natives | outcome=win\n- race-011-fg-002-research-triangle: North Carolina Governor 2024 | Research Triangle (Wake County - Raleigh/Cary) | 10 (5F, 5M) - Mix of Triangle professionals and residents | outcome=win\n- race-011-fg-003-rural-eastern: North Carolina Governor 2024 | Eastern North Carolina (Greenville/Pitt County) | 9 (4F, 5M) - Rural and small-town voters, mix of politics | outcome=win\n- race-012-fg-001-milwaukee-suburbs: Wisconsin Senate 2024 | Milwaukee Suburbs (WOW Counties - Waukesha/Ozaukee) | 10 (5F, 5M) - Suburban voters, traditionally Republican-leaning | outcome=win\n- race-012-fg-002-madison: Wisconsin Senate 2024 | Madison (Dane County) | 10 (6F, 4M) - Progressive base, academics, state workers | outcome=win\n- race-012-fg-003-fox-valley: Wisconsin Senate 2024 | Fox Valley (Appleton/Outagamie County) | 10 (5F, 5M) - Manufacturing region, swing voters, Schroeder's home turf | outcome=win\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: Cleveland suburbs on local issues",
          "label": "prompts/router_v2.txt: You are a focus group search filter. Given a user query, determine which focus groups are relevant.\n\nAVAILABLE FOCUS GROUPS:\n{{manifest}}\n\nYOUR TASK:\n1. Analyze the query for geographic, demographic, or other specific filters\n2. Match against the focus group metadata (state, location, demographics, outcome)\n3. Return relevant focus group IDs\n\nFILTERING RULES:\n- If query mentions a STATE (Ohio, Michigan, etc.) → return only FGs from that state\n- If query mentions a CITY (Cleveland, Detroit, etc.) → return FGs from that city/area\n- If query mentions DEMOGRAPHICS (working-class, Latino, suburban, etc.) → return FGs matching that demographic\n- If query mentions OUTCOME (lost, won, races we lost) → filter by outcome\n- If query is BROAD with no specific filters (just topics like \"economy\", \"jobs\", \"healthcare\") → return {\"all\": true}\n\nIMPORTANT:\n- Be INCLUSIVE - if in doubt, include the focus group (retrieval will handle relevance)\n- A query can have MULTIPLE filters (e.g., \"Ohio working-class\" = Ohio AND working-class)\n- If query mentions a state/location we don't have data for, return empty with reason\n\nOUTPUT FORMAT:\nReturn ONLY valid JSON, no explanations, no text before or after.\n\nExamples:\n{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\", \"race-007-fg-002-columbus-educated\"]}\n{\"all\": true}\n{\"focus_group_ids\": [], \"reason\": \"No focus groups match California. Available: Michigan, Pennsylvania, Wisconsin, Georgia, Arizona, Nevada, Ohio, Montana, North Carolina\"}\n\nUser query: {{query}}"
        },
        "promptId": "a7e2f41067a7d9db3b6a7a892df483d7a3bb1eaf6f7f3e270871d006e4819d99",
        "promptIdx": 2,
        "provider": {
          "id": "openrouter:google/gemini-3-flash-preview",
          "label": "gemini-3-flash"
        },
        "response": {
          "output": "{\"focus_group_ids\": [\"race-007-fg-001-cleveland-suburbs\"]}",
          "tokenUsage": {
            "total": 2795,
            "prompt": 2769,
            "completion": 26,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0
            }
          },
          "cached": false,
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "manifest": "file://manifest.txt",
            "query": "Cleveland suburbs on local issues"
          },
          "assert": [
            {
              "type": "javascript",
              "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.some(id => id.includes('cleveland') || id.includes('race-007-fg-001'));\n} catch { return false; }\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 13,
        "vars": {
          "manifest": "file://manifest.txt",
          "query": "Cleveland suburbs on local issues"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      }
    ],
    "stats": {
      "successes": 40,
      "failures": 2,
      "errors": 0,
      "tokenUsage": {
        "prompt": 114984,
        "completion": 2819,
        "cached": 0,
        "total": 117803,
        "numRequests": 42,
        "completionDetails": {
          "reasoning": 0,
          "acceptedPrediction": 0,
          "rejectedPrediction": 0
        },
        "assertions": {
          "total": 0,
          "prompt": 0,
          "completion": 0,
          "cached": 0,
          "numRequests": 0,
          "completionDetails": {
            "reasoning": 0,
            "acceptedPrediction": 0,
            "rejectedPrediction": 0
          }
        }
      },
      "durationMs": 12128
    }
  },
  "config": {
    "tags": {},
    "description": "Router Final Comparison - Haiku vs Gemini 2.0 vs Gemini 3 Flash",
    "prompts": [
      "file:///Users/tanayvenkata/dev/focus-group/eval/router_eval/prompts/router_v2.txt"
    ],
    "providers": [
      {
        "id": "openrouter:anthropic/claude-3-haiku",
        "label": "claude-3-haiku",
        "config": {
          "temperature": 0,
          "max_tokens": 500
        }
      },
      {
        "id": "openrouter:google/gemini-2.0-flash-001",
        "label": "gemini-2.0-flash",
        "config": {
          "temperature": 0,
          "max_tokens": 500
        }
      },
      {
        "id": "openrouter:google/gemini-3-flash-preview",
        "label": "gemini-3-flash",
        "config": {
          "temperature": 0,
          "max_tokens": 500
        }
      }
    ],
    "tests": [
      {
        "vars": {
          "query": "What did Ohio voters say about jobs?"
        },
        "assert": [
          {
            "type": "javascript",
            "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-007'));\n} catch { return false; }\n"
          }
        ]
      },
      {
        "vars": {
          "query": "How do Michigan voters feel about the economy?"
        },
        "assert": [
          {
            "type": "javascript",
            "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-001') || id.includes('race-009'));\n} catch { return false; }\n"
          }
        ]
      },
      {
        "vars": {
          "query": "Pennsylvania voters on healthcare"
        },
        "assert": [
          {
            "type": "javascript",
            "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-002') || id.includes('race-010'));\n} catch { return false; }\n"
          }
        ]
      },
      {
        "vars": {
          "query": "What did Wisconsin voters think about education?"
        },
        "assert": [
          {
            "type": "javascript",
            "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-003') || id.includes('race-012'));\n} catch { return false; }\n"
          }
        ]
      },
      {
        "vars": {
          "query": "Georgia voters on voting rights"
        },
        "assert": [
          {
            "type": "javascript",
            "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-004'));\n} catch { return false; }\n"
          }
        ]
      },
      {
        "vars": {
          "query": "Arizona immigration concerns"
        },
        "assert": [
          {
            "type": "javascript",
            "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-005'));\n} catch { return false; }\n"
          }
        ]
      },
      {
        "vars": {
          "query": "North Carolina suburban voters"
        },
        "assert": [
          {
            "type": "javascript",
            "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-011'));\n} catch { return false; }\n"
          }
        ]
      },
      {
        "vars": {
          "query": "Montana rural voters"
        },
        "assert": [
          {
            "type": "javascript",
            "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length > 0 && ids.every(id => id.includes('race-008'));\n} catch { return false; }\n"
          }
        ]
      },
      {
        "vars": {
          "query": "What do voters think about the economy?"
        },
        "assert": [
          {
            "type": "javascript",
            "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
          }
        ]
      },
      {
        "vars": {
          "query": "How do people feel about inflation?"
        },
        "assert": [
          {
            "type": "javascript",
            "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
          }
        ]
      },
      {
        "vars": {
          "query": "Voter concerns about healthcare costs"
        },
        "assert": [
          {
            "type": "javascript",
            "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
          }
        ]
      },
      {
        "vars": {
          "query": "What messaging resonates with swing voters?"
        },
        "assert": [
          {
            "type": "javascript",
            "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  return result.all === true;\n} catch { return false; }\n"
          }
        ]
      },
      {
        "vars": {
          "query": "California voters on housing"
        },
        "assert": [
          {
            "type": "javascript",
            "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.length === 0 || result.reason;\n} catch { return false; }\n"
          }
        ]
      },
      {
        "vars": {
          "query": "Cleveland suburbs on local issues"
        },
        "assert": [
          {
            "type": "javascript",
            "value": "let text = output;\nif (text.includes('```')) {\n  text = text.split('```')[1];\n  if (text.startsWith('json')) text = text.slice(4);\n}\ntry {\n  const result = JSON.parse(text.trim());\n  const ids = result.focus_group_ids || [];\n  return ids.some(id => id.includes('cleveland') || id.includes('race-007-fg-001'));\n} catch { return false; }\n"
          }
        ]
      }
    ],
    "scenarios": [],
    "env": {},
    "defaultTest": {
      "vars": {
        "manifest": "file://manifest.txt"
      },
      "assert": [],
      "options": {},
      "metadata": {}
    },
    "outputPath": [
      "results_final.json"
    ],
    "extensions": [],
    "metadata": {},
    "evaluateOptions": {}
  },
  "shareableUrl": null,
  "metadata": {
    "promptfooVersion": "0.120.8",
    "nodeVersion": "v25.2.1",
    "platform": "darwin",
    "arch": "arm64",
    "exportedAt": "2026-01-04T16:04:40.170Z",
    "evaluationCreatedAt": "2026-01-04T16:04:27.882Z"
  }
}